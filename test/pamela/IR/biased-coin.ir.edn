{coin
 {:args [],
  :fields
  {:observed-face
   {:access :private,
    :initial {:mode :head, :pclass coin-faces, :type :mode-reference},
    :observable true}},
  :methods
  {emit-head
   [{:args [],
     :pre
     {:type :equal,
      :args
      [{:type :field-reference, :pclass this, :field :observed-face}
       {:type :mode-reference, :pclass coin-faces, :mode :head}]},
     :temporal-constraints [{:type :bounds, :value [0 :infinity]}],
     :reward 0,
     :controllable false,
     :primitive true,
     :betweens [],
     :display-name "Emit Head",
     :post {:type :literal, :value true},
     :cost 0,
     :body nil,
     :doc "Heads"}],
   emit-tail
   [{:args [],
     :pre
     {:type :equal,
      :args
      [{:type :field-reference, :pclass this, :field :observed-face}
       {:type :mode-reference, :pclass coin-faces, :mode :tail}]},
     :temporal-constraints [{:type :bounds, :value [0 :infinity]}],
     :reward 0,
     :controllable false,
     :primitive true,
     :betweens [],
     :display-name "Emit Tail",
     :post {:type :literal, :value true},
     :cost 0,
     :body nil,
     :doc "Tails"}],
   flip
   [{:args [],
     :pre {:type :literal, :value true},
     :temporal-constraints [{:type :bounds, :value [0 :infinity]}],
     :reward 0,
     :controllable false,
     :primitive true,
     :betweens [],
     :display-name "Flip",
     :post {:type :literal, :value true},
     :cost 0,
     :body
     [{:type :choose,
       :body
       [{:type :choice,
         :body
         [{:type :choose,
           :body
           [{:type :choice,
             :body
             [{:type :plant-fn-symbol,
               :name this,
               :method emit-head,
               :args []}],
             :probability {:type :lvar, :name "eBH", :default 0.8}}
            {:type :choice,
             :body
             [{:type :plant-fn-symbol,
               :name this,
               :method emit-tail,
               :args []}],
             :probability {:type :lvar, :name "eBT", :default 0.2}}]}],
         :condition
         {:type :equal,
          :args
          [{:type :mode-reference, :pclass this, :mode :biased}
           {:type :literal, :value true}]}}
        {:type :choice,
         :body
         [{:type :choose,
           :body
           [{:type :choice,
             :body
             [{:type :plant-fn-symbol,
               :name this,
               :method emit-head,
               :args []}],
             :probability {:type :lvar, :name "eUH", :default 0.51}}
            {:type :choice,
             :body
             [{:type :plant-fn-symbol,
               :name this,
               :method emit-tail,
               :args []}],
             :probability
             {:type :lvar, :name "eUT", :default 0.49}}]}],
         :condition
         {:type :equal,
          :args
          [{:type :mode-reference, :pclass this, :mode :unbiased}
           {:type :literal, :value true}]}}]}],
     :doc "Flip the coin"}]},
  :modes
  {:biased {:type :literal, :value true},
   :unbiased {:type :literal, :value true}},
  :transitions
  {:biased:biased
   {:post {:mode :biased, :pclass this, :type :mode-reference},
    :pre {:mode :biased, :pclass this, :type :mode-reference},
    :probability {:default 0.9, :name "tBB", :type :lvar}},
   :biased:unbiased
   {:post {:mode :unbiased, :pclass this, :type :mode-reference},
    :pre {:mode :biased, :pclass this, :type :mode-reference},
    :probability {:default 0.1, :name "tBU", :type :lvar}},
   :unbiased:biased
   {:post {:mode :biased, :pclass this, :type :mode-reference},
    :pre {:mode :unbiased, :pclass this, :type :mode-reference},
    :probability {:default 0.1, :name "tUB", :type :lvar}},
   :unbiased:unbiased
   {:post {:mode :unbiased, :pclass this, :type :mode-reference},
    :pre {:mode :unbiased, :pclass this, :type :mode-reference},
    :probability {:default 0.9, :name "tUU", :type :lvar}}},
  :type :pclass},
 coin-faces
 {:args [],
  :meta {:doc "Enumeration of coin faces"},
  :modes
  {:head {:type :literal, :value true},
   :tail {:type :literal, :value true}},
  :type :pclass},
 main
 {:args [],
  :fields
  {:acoin
   {:access :private,
    :initial
    {:args [],
     :id "penny",
     :interface "RMQ",
     :pclass coin,
     :plant-part "coin-fsm",
     :type :pclass-ctor},
    :observable false}},
  :methods
  {flip-1000
   [{:args [],
     :pre {:type :literal, :value true},
     :temporal-constraints [{:type :bounds, :value [0 :infinity]}],
     :reward 0,
     :controllable false,
     :primitive false,
     :betweens [],
     :display-name "Flip 1000",
     :post {:type :literal, :value true},
     :cost 0,
     :body
     [{:type :sequence,
       :body
       [{:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field,
         :method flip,
         :args [],
         :field :acoin}]}],
     :doc "Series of 1000 coin flips"}],
   flip-3
   [{:args [],
     :pre {:type :literal, :value true},
     :temporal-constraints [{:type :bounds, :value [0 :infinity]}],
     :reward 0,
     :controllable false,
     :primitive false,
     :betweens [],
     :display-name "Flip 3",
     :post {:type :literal, :value true},
     :cost 0,
     :body
     [{:type :sequence,
       :body
       [{:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field, :method flip, :args [], :field :acoin}
        {:type :plant-fn-field,
         :method flip,
         :args [],
         :field :acoin}]}],
     :doc "Series of 3 coin flips"}]},
  :type :pclass},
 pamela/lvars
 {:lvars
  {"eBH" 0.8,
   "eBT" 0.2,
   "eUH" 0.51,
   "eUT" 0.49,
   "tBB" 0.9,
   "tBU" 0.1,
   "tUB" 0.1,
   "tUU" 0.9},
  :type :lvars}}
